# Predicting Outcomes of the Premier League Matches Using Real World and Computer Game Data 


## Motivation
There has been a lot of interest in predicting match outcomes of football (or soccer) games as the sport is hugely popular with a large fan base and enjoys much media attention. Predictions of match outcomes may be useful for stakeholders within the sport, such as managers, journalists, analysts, bookmakers, etc., as such information can be utilized to make risk assessments and plan strategies.

<br/>

## Goal
- Construct comprehensive dataset include official player statistics and in-game attributes for football prediction.
- Predict English Premier League match results using different models, such as Elo Rating System, Support Vector Machine(SVM), RandomForest(RF), and Heterogeneous Graph Convolutional Network (HGCN).

<br/>

## Details of Folders

<br/>

### fm_inside/fm_inside_scraper
This folder includes web scrapers to extract in-game attributes of players from the [FMinside](https://fminside.net/players)
- [list_links.py](./fm_inside/fm_inside_scraper/list_links.py) generates [list_links.txt](./fm_inside/fm_inside_scraper/list_links.txt) includes each link of a player. Links will be used in [fm_inside_spider.py](./fm_inside/fm_inside_scraper/fm_inside_scraper/spiders/fm_inside_spider.py) and this file generates [fm_players.json](./fm_inside/fm_inside_scraper/fm_inside_scraper/spiders/fm_players.json) includes fm attributes of each player.

<br/>

### premier_official_data
This folder includes web scrapers to extract players' official statistics and official match details from the [Premier Leagure Official Website](https://www.premierleague.com/matchweek/7847/blog)
- club_match_official:
    - [crawl_matches.py](./premier_official_data/club_match_official/crawl_matches.py) generates brief information of each match from [season 2012-13](./premier_official_data/club_match_official/matches/season_2012-13.json) to [season 2021-22](./premier_official_data/club_match_official/matches/season_2021-22.json)
    - [crawl_match_details.py](./premier_official_data/club_match_official/crawl_match_details.py) generates **details** of each match from [season 2012-13 (details)](./premier_official_data/club_match_official/matches/season_2012-13.details.json) to [season 2021-22 (details)](./premier_official_data/club_match_official/matches/season_2021-22.details.json) using json files generated by *crawl_matches.py*.
    
### Analysis
We observed that not every player has the same diversity of all-season official statistics. Therefore, selecting some from all statistics was necessary to ensure each player had the same features. For the selection, we sorted official statistics in descending order in terms of how many times each statistic is observed in the player data and calculated the percentage of players who contains the top’ n’ statistics. We decided to use the top 21 statistics and sampled approximately 41% of players who included all of those statistics. The significant common characteristic of most players not included in the sample is that the last season those players played was before season 2012-13. Therefore, we decided to discard players who never had a match from season 2012-13 to 2021-22. This [Jupyter Notebook](./Analysis/Selecting_official_attributes.ipynb) shows the codes and process for discarding some statistics of a player and some players.


### datasets
Each ot files final_data_field_players.json and final_dataset_goalkeepers.json includes 1499 field players and 128 goal-keepers respectively.


### Experiments

